def main():
    blocks = {
        'I': [
            [[0, 0], [1, 0], [2, 0], [3, 0]],
            [[0, 0], [0, 1], [0, 2], [0, 3]]
        ],
        'O': [
            [[0, 0], [1, 0], [0, 1], [1, 1]]
        ],
        'L': [
            [[0, 0], [1, 0], [2, 0], [2, 1]],
            [[0, 0], [1, 0], [0, 1], [0, 2]],
            [[0, 0], [0, 1], [1, 1], [2, 1]],
            [[1, 0], [1, 1], [1, 2], [0, 2]]
        ],
        'J': [
            [[2, 0], [2, 1], [1, 1], [0, 1]],
            [[0, 0], [1, 0], [1, 1], [1, 2]],
            [[0, 0], [0, 1], [1, 0], [2, 0]],
            [[0, 0], [0, 1], [0, 2], [1, 2]]
        ],
        'S': [
            [[1, 0], [1, 1], [0, 1], [0, 2]],
            [[0, 0], [1, 0], [1, 1], [2, 1]]
        ],
        'Z': [
            [[0, 0], [0, 1], [1, 1], [1, 2]],
            [[2, 0], [1, 0], [1, 1], [0, 1]]
        ],
        'T': [
            [[0, 0], [0, 1], [0, 2], [1, 1]],
            [[1, 0], [0, 1], [1, 1], [2, 1]],
            [[1, 0], [1, 1], [1, 2], [0, 1]],
            [[0, 0], [1, 0], [2, 0], [1, 1]]
        ]
    }

    N, M = map(int, input().split())
    paper = [list(map(int, input().split())) for _ in range(N)]

    maxNum = 0
    for i in range(N):
        for j in range(M):
            for block in blocks.values():
                for pos in block:
                    tot = 0
                    for x, y in pos:
                        r, c = i + x, j + y
                        if r >= N or c >= M:
                            break
                        tot += paper[r][c]
                    else:
                        maxNum = max(maxNum, tot)

    print(maxNum)


if __name__ == "__main__":
    main()
